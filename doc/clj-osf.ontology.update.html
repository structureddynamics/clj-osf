<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-osf.ontology.update documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-osf 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-osf</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.auth.lister.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lister</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registrar</span></div></div></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.access.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>access</span></div></a></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.group.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>group</span></div></a></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li><li class="depth-4"><a href="clj-osf.auth.registrar.ws.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ws</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>cognonto</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.cognonto.classify.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>classify</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tag</span></div></div></li><li class="depth-4"><a href="clj-osf.cognonto.tag.concepts.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>concepts</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.core.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crud</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.crud.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.crud.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.crud.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.crud.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>dataset</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.dataset.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.dataset.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.dataset.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.dataset.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>ontology</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.ontology.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.ontology.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.ontology.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3 current"><a href="clj-osf.ontology.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>revision</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.revision.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.diff.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>diff</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.lister.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lister</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.revision.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.search.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>search</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.sparql.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sparql</span></div></a></li><li class="depth-2"><a href="clj-osf.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-osf.ontology.update.html#var-create-or-update-entity"><div class="inner"><span>create-or-update-entity</span></div></a></li><li class="depth-1"><a href="clj-osf.ontology.update.html#var-disable-reasoner"><div class="inner"><span>disable-reasoner</span></div></a></li><li class="depth-1"><a href="clj-osf.ontology.update.html#var-enable-reasoner"><div class="inner"><span>enable-reasoner</span></div></a></li><li class="depth-1"><a href="clj-osf.ontology.update.html#var-ontology"><div class="inner"><span>ontology</span></div></a></li><li class="depth-1"><a href="clj-osf.ontology.update.html#var-save-ontology"><div class="inner"><span>save-ontology</span></div></a></li><li class="depth-1"><a href="clj-osf.ontology.update.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="clj-osf.ontology.update.html#var-update-entity-uri"><div class="inner"><span>update-entity-uri</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clj-osf.ontology.update</h2><div class="doc"><div class="markdown"><p>Send an Ontology Update service is used to update an OWL ontology existing in the OSF instance.</p><p>This service is a web service wrapper over the OWLAPI ontology library. It wraps all the needed functionalities related to updating an ontology. Most of the related API has been implemented. So we can say that web service (with the other related services) turns the OWLAPI into a web service API.</p><p>There is an important semantic distinction to do: this endpoint is about UPDATING an ontology. This means that we may be updating ontologies resources, or creating new ones. The logic is that by creating new resources (such as classes, properties and named individuals) we are updating the ontology.</p><p>This is what this web service endpoint is about. To update or create an existing resource, the requester only has to send the RDF description of that resource to update or create. If the resource is existing, it will get updated, if it is not, it will get added.</p><p>To use the Ontology: Update code, you have to:</p>
<pre><code>;; Use/require the namespace
(require &#39;[clj-osf.ontology.update :as ontology-u])

;; Define the OSF Sandbox credentials (or your own):
(require &#39;[clj-osf.core :as osf])

(osf/defosf osf-test-endpoint {:protocol :http
                               :domain &quot;sandbox.opensemanticframework.org&quot;
                               :api-key &quot;EDC33DA4D977CFDF7B90545565E07324&quot;
                               :app-id &quot;administer&quot;})

(osf/defuser osf-test-user {:uri &quot;http://sandbox.opensemanticframework.org/wsf/users/admin&quot;})
</code></pre><p><a href="http://wiki.opensemanticframework.org/index.php/Ontology_Update#Web_Service_Endpoint_Information">Open Semantic Framework Endpoint Documentation</a></p></div></div><div class="public anchor" id="var-create-or-update-entity"><h3>create-or-update-entity</h3><div class="usage"><code>(create-or-update-entity document &amp; {:keys [enable-advanced-indexation], :or {enable-advanced-indexation true}})</code></div><div class="doc"><div class="markdown"><p>Create or update an entity in the ontology. An entity can be anything of a class, an object property, a datatype property, an annotation property or a named individual.</p><p>Right now, the creation and the modification of an entity is simplified to writing the RDF triples describing the entity to create or update. The advantage of this method is that a system that interacts with the endpoints doesn&rsquo;t have to send multiple different queries to change multiple aspects of an entity. It only has to generate the code offline, and send it once to the Ontology Update web service endpoint, with the complete RDF description of the entity to update, or create, in the instance.</p><p>If an entity is being modified by some system, usually the workflow process is: * The system send a query to the Ontology Read web service endpoint to get the  current complete description of the entity to update * The system modify the RDF description of that entity, the way it has to (by  adding, removing or modifying triples) * Once the modifications are done offline, the system send the resulting RDF  document to the Ontology Update web service endpoint</p><h5>Parameters</h5>
<ul>
  <li><code>[document]</code> A version of the RDF document describing the entity (class, property or  named individual) to create or update in the ontology.</li>
  <li><code>[enable-advanced-indexation]</code> <em>(optional)</em> Enable advanced indexation of the ontology.  This means that the ontology&rsquo;s description (so all the classes, properties  and named individuals) will be indexed in the other data management system  in OSF. This means that all the information in these ontologies will be  accessible via the other endpoints such as the Search and the SPARQL web  service endpoints. Enabling this option may render the creation process slower  depending on the size of the created ontology.</li>
</ul><h5>Usage</h5>
<pre><code>;; Create a new class
(turtle/defns iron &quot;http://purl.org/ontology/iron#&quot;)
(turtle/defns bibo &quot;http://purl.org/ontology/bibo/&quot;)
(turtle/defns owl &quot;http://www.w3.org/2002/07/owl#&quot;)

(ontology/update
  (ontology/ontology &quot;http://purl.org/ontology/bibo/&quot;)
  (ontology/create-or-update-entity
    (turtle/rdf
      (bibo :new-property) (turtle/a) (owl :ObjectProperty)
      (bibo :new-property) (iron :prefLabel) (turtle/literal &quot;Some New Property&quot;)))) 
</code></pre></div></div></div><div class="public anchor" id="var-disable-reasoner"><h3>disable-reasoner</h3><div class="usage"><code>(disable-reasoner)</code></div><div class="doc"><div class="markdown"><p>Disable the reasoner for for indexing the ontology into OSF (the triple store and the full text engine)</p><h5>Usage</h5>
<pre><code>(ontology/update
  (ontology/disable-reasoner)
</code></pre></div></div></div><div class="public anchor" id="var-enable-reasoner"><h3>enable-reasoner</h3><div class="usage"><code>(enable-reasoner)</code></div><div class="doc"><div class="markdown"><p>Enable the reasoner for indexing the ontology into OSF (the triple store and the full text engine) </p><p>This is the default behavior of this service.</p><p><em>Note:</em> This only has an effect if the advanced indexation is enabled</p><h5>Usage</h5>
<pre><code>(ontology/update
  (ontology/enable-reasoner)
</code></pre></div></div></div><div class="public anchor" id="var-ontology"><h3>ontology</h3><div class="usage"><code>(ontology uri)</code></div><div class="doc"><div class="markdown"><p>URI of the ontology; the URI of an Ontology dataset is the URL used to import that ontology in the system. The URL can be the URI of the ontology if it was resolvable on the Web, or the URL where the OWL file, containing the ontology&rsquo;s description, can be resolved by the server (on the web, on the file system, etc) via a URL.</p><p><em>Note:</em> you can get the list of all loaded ontologies by using the  <code>(clj-osf.ontology.read/get-loaded-ontologies)</code></p><p>The usage of this function is <strong>Required</strong></p><h5>Usage</h5>
<pre><code>(ontology/update
  (ontology/ontology &quot;http://purl.org/ontology/bibo/&quot;)
</code></pre></div></div></div><div class="public anchor" id="var-save-ontology"><h3>save-ontology</h3><div class="usage"><code>(save-ontology)</code></div><div class="doc"><div class="markdown"><p>When the <code>(craete-or-update-entity)</code>, or the <code>(update-entity-uri)</code>, functions are called via this web service endpoint, the ontology is tagged with a <code>wsf:ontologyModified</code> &ldquo;true&rdquo; triple that specifies that the ontology got modified in some ways.</p><p>What this <code>(save-ontology)</code> call does, is only to remove that tag (so, to remove the tag that says that the ontology got modified).</p><p>The ontology is after saved, and persisted, in the OWLAPI instance. However, if you want your system to save a hard-copy of an ontology that got modified (to reload it elsewhere), the you system will have to perform these steps:</p><p>Check if the ontology got modified by checking if the <code>wsf:OntologyModified</code> &ldquo;true&rdquo; triple appears in the ontology&rsquo;s description after a call to the Ontology Read web service endpoint for the function <code>(get-ontology)</code>: mode=description.</p><p>If is has been modified, then it calls the Ontology Read endpoints again, but using the getSerialized function. Once it gets the serialization form of the ontology, the system can now save it on its local file system, or elsewhere.</p><p>Finally it calls the saveOntology function of the Ontology Update web service endpoint to mark the ontology as saved.</p><h5>Usage</h5>
<pre><code>(ontology/update
  (ontology/save-ontology)
</code></pre></div></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update &amp; body)</code></div><div class="doc"><div class="markdown"><p>Ontology: Update query.</p><p><strong>Required</strong></p><h5>Usage</h5>
<pre><code>;; Create a new class
(turtle/defns iron &quot;http://purl.org/ontology/iron#&quot;)
(turtle/defns bibo &quot;http://purl.org/ontology/bibo/&quot;)
(turtle/defns owl &quot;http://www.w3.org/2002/07/owl#&quot;)

(ontology-u/update
  (ontology-u/ontology &quot;http://purl.org/ontology/bibo/&quot;)

(ontology-u/create-or-update-entity
  (turtle/rdf
   (bibo :new-property) (turtle/a) (owl :ObjectProperty)
   (bibo :new-property) (iron :prefLabel) (turtle/literal &quot;Some New Property&quot;))))

;; Update the URI of an existing entity
(ontology-u/update
  (ontology-u/ontology &quot;http://purl.org/ontology/bibo/&quot;)
    (ontology-u/update-entity-uri
      &quot;http://purl.org/ontology/bibo/new-property&quot; &quot;http://purl.org/ontology/bibo/update-uri&quot;))
</code></pre></div></div></div><div class="public anchor" id="var-update-entity-uri"><h3>update-entity-uri</h3><div class="usage"><code>(update-entity-uri old-uri new-uri &amp; {:keys [enable-advanced-indexation], :or {enable-advanced-indexation true}})</code></div><div class="doc"><div class="markdown"><p>Update (refactor) the URI of an existing entity. The entity can be a class, an object property, a datatype property, an annotation property or a named individual. </p><h5>Parameters</h5>
<ul>
  <li><code>[old-uri]</code> This is the current URI of the entity to update. This URI will be replaced  by the newuri. After this query, that current URI won&rsquo;t be available anymore.</li>
  <li><code>[new-uri]</code> This is the new URI to define for the entity. This URI is replacing the  olduri. After this query, this is the URI that will be referring to this entity.</li>
  <li><code>[enable-advanced-indexation]</code> <em>(optional)</em> Enable advanced indexation of the ontology.  This means that the ontology&rsquo;s description (so all the classes, properties  and named individuals) will be indexed in the other data management system  in OSF. This means that all the information in these ontologies will be  accessible via the other endpoints such as the Search and the SPARQL web  service endpoints. Enabling this option may render the creation process slower  depending on the size of the created ontology.</li>
</ul><h5>Usage</h5>
<pre><code>;; Update the URI of an existing entity
(ontology/update
  (ontology/ontology &quot;http://purl.org/ontology/bibo/&quot;)
  (ontology/update-entity-uri
  &quot;http://purl.org/ontology/bibo/new-property&quot; &quot;http://purl.org/ontology/bibo/update-uri&quot;))  
</code></pre></div></div></div></div></body></html>