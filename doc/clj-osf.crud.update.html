<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-osf.crud.update documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-osf 0.1.2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-osf</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.auth.lister.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lister</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registrar</span></div></div></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.access.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>access</span></div></a></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.group.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>group</span></div></a></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li><li class="depth-4"><a href="clj-osf.auth.registrar.ws.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ws</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>cognonto</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.cognonto.classify.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>classify</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tag</span></div></div></li><li class="depth-4"><a href="clj-osf.cognonto.tag.concepts.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>concepts</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.core.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crud</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.crud.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.crud.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.crud.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3 current"><a href="clj-osf.crud.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>dataset</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.dataset.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.dataset.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.dataset.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.dataset.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>ontology</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.ontology.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.ontology.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.ontology.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.ontology.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>revision</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.revision.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.diff.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>diff</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.lister.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lister</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.revision.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.search.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>search</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.sparql.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sparql</span></div></a></li><li class="depth-2"><a href="clj-osf.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-osf.crud.update.html#var-create-revision"><div class="inner"><span>create-revision</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-dataset"><div class="inner"><span>dataset</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-document"><div class="inner"><span>document</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-ignore-revision"><div class="inner"><span>ignore-revision</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-is-rdf-n3"><div class="inner"><span>is-rdf-n3</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-is-rdf-xml"><div class="inner"><span>is-rdf-xml</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-status-archive"><div class="inner"><span>status-archive</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-status-experimental"><div class="inner"><span>status-experimental</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-status-harvesting"><div class="inner"><span>status-harvesting</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-status-pre-release"><div class="inner"><span>status-pre-release</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-status-published"><div class="inner"><span>status-published</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-status-staging"><div class="inner"><span>status-staging</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-status-unspecified"><div class="inner"><span>status-unspecified</span></div></a></li><li class="depth-1"><a href="clj-osf.crud.update.html#var-update"><div class="inner"><span>update</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clj-osf.crud.update</h2><div class="doc"><div class="markdown"><p>Send a Crud Update Query to a OSF Crud Update web service endpoint</p><p>The CRUD: Update Web service is used to update an existing instance record indexed in a target dataset part of a WSF (Web Services Framework). </p><p>Usage notes: This Web service is intended to be used by any user that wants to update the description of an instance record. The update of a record is performed by two atomic actions: delete and create. All records described within the input RDF document will get updated on the system. For each of them, the Crud Update web service will remove all the triples we have defined for them in the target dataset, and then will re-insert the new ones.</p><p>This is the main difference between an Update of a given instance record, and the Creation (using Crud Create) of an already existing record: the update web service guaranties that only the triples of the updated version of an instance record will be in the system. Creating an already existing instance record, will overwrite existing triples, and will add new ones. But the ones from the old version of the instance record that are not in the new version won&rsquo;t be delete in the triple store instance, but will be deleted in the Solr instance because Solr documents can&rsquo;t be updated (they can only be replaced).</p><p>It also update possible reification statements.</p><p>Warning: if your RDF document contains blank nodes and that you try to update them using the CRUD: Update web service endpoint, this will results in the creation of a new set of resources with new blank nodes URIS. This means that resources specified as blank nodes can&rsquo;t be updated using this web service endpoint. The best practice is not using blank nodes.</p><p>To use the CRUD Update code, you have to:</p>
<pre><code>;; Use/require the namespace
(require &#39;[clj-osf.crud.update :as crud])

;; Define the OSF Sandbox credentials (or your own):
(require &#39;[clj-osf.core :as osf])

(osf/defosf osf-test-endpoint {:protocol :http
                               :domain &quot;sandbox.opensemanticframework.org&quot;
                               :api-key &quot;EDC33DA4D977CFDF7B90545565E07324&quot;
                               :app-id &quot;administer&quot;})

(osf/defuser osf-test-user {:uri &quot;http://sandbox.opensemanticframework.org/wsf/users/admin&quot;})
</code></pre><p><a href="http://wiki.opensemanticframework.org/index.php/CRUD:_Update#Web_Service_Endpoint_Information">Open Semantic Framework Endpoint Documentation</a></p></div></div><div class="public anchor" id="var-create-revision"><h3>create-revision</h3><div class="usage"><code>(create-revision)</code></div><div class="doc"><div class="markdown"><p>Specify that we want to create a revision record for this update.</p><p>This is the <strong>default behavior</strong></p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/create-revision))    
</code></pre></div></div></div><div class="public anchor" id="var-dataset"><h3>dataset</h3><div class="usage"><code>(dataset uri)</code></div><div class="doc"><div class="markdown"><p>Set the URI(s) of the dataset where the instance record is indexed.</p><p>The usage of this function is <strong>Required</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris]</code> Dataset URI where to index the RDF document</li>
</ul><h5>Usage</h5>
<pre><code>(crud/update
  (crud/dataset &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;))
</code></pre></div></div></div><div class="public anchor" id="var-document"><h3>document</h3><div class="usage"><code>(document document)</code></div><div class="doc"><div class="markdown"><p>Set the RDF document where instance record(s) are described. The size of this document is limited to 8MB on the default system (may be lower or higher on different systems).</p><p>The usage of this function is <strong>Required</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[document]</code> RDF+XML or RDF+N3 documents to import into the system</li>
</ul><h5>Usage</h5>
<pre><code>(require &#39;[clj-turtle.core :as turtle])
(require &#39;[clj-osf.crud.create :as crud-c])

;; Using clj-turtle
(crud/update
  (crud/dataset &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;)
  (crud/document
    (turtle/rdf
      (foo :bob) (turtle/a) (foaf :Person)
      (foo :bob) (iron :prefLabel) (turtle/literal &quot;Bob&quot; :lang :en)
      (foo :bob) (iron :prefLabel) (turtle/literal &quot;Robert&quot; :lang :fr)
      (foo :bob) (foaf :knows) (foo :alice) (turtle/rei 
                                              (foo :since) (turtle/literal &quot;2014-10-25&quot;
                                                            :type :xsd:dateTime))
      (foo :bob) (foaf :knows) (foo :eli) (turtle/rei 
                                            (foo :since) (turtle/literal &quot;2014-11-20&quot;
                                                          :type :xsd:dateTime))))

  (crud/is-rdf-n3))    
</code></pre></div></div></div><div class="public anchor" id="var-ignore-revision"><h3>ignore-revision</h3><div class="usage"><code>(ignore-revision)</code></div><div class="doc"><div class="markdown"><p>Specify that we do not want to create a revision record for this update.</p><p>The usage of this function is <strong>Optional</strong></p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/ignore-revision))    
</code></pre></div></div></div><div class="public anchor" id="var-is-rdf-n3"><h3>is-rdf-n3</h3><div class="usage"><code>(is-rdf-n3)</code></div><div class="doc"><div class="markdown"><p>Specifies that the serialization format of the input document is in RDF+N3</p><p>The usage of this function is <strong>Required</strong> (or the usage of the <code>is-rdf-xml</code> function)</p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/is-rdf-n3))
</code></pre></div></div></div><div class="public anchor" id="var-is-rdf-xml"><h3>is-rdf-xml</h3><div class="usage"><code>(is-rdf-xml)</code></div><div class="doc"><div class="markdown"><p>Specifies that the serialization format of the input document is in RDF+XML</p><p>The usage of this function is <strong>Required</strong> (or the usage of the <code>is-rdf-n3</code> function)</p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/is-rdf-xml))
</code></pre></div></div></div><div class="public anchor" id="var-status-archive"><h3>status-archive</h3><div class="usage"><code>(status-archive)</code></div><div class="doc"><div class="markdown"><p>Specify that we do not want to create a revision record for this update.</p><p>The usage of this function is <strong>Required</strong> if no other status is specified</p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/status-archive))
</code></pre></div></div></div><div class="public anchor" id="var-status-experimental"><h3>status-experimental</h3><div class="usage"><code>(status-experimental)</code></div><div class="doc"><div class="markdown"><p>Specify that the record(s) beind update have a lifecycle stage status &lsquo;experimental&rsquo;</p><p>The usage of this function is <strong>Required</strong> if no other status is specified</p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/status-experimental))
</code></pre></div></div></div><div class="public anchor" id="var-status-harvesting"><h3>status-harvesting</h3><div class="usage"><code>(status-harvesting)</code></div><div class="doc"><div class="markdown"><p>Specify that the record(s) beind update have a lifecycle stage status &lsquo;harvesting&rsquo;</p><p>The usage of this function is <strong>Required</strong> if no other status is specified</p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/status-harvesting))
</code></pre></div></div></div><div class="public anchor" id="var-status-pre-release"><h3>status-pre-release</h3><div class="usage"><code>(status-pre-release)</code></div><div class="doc"><div class="markdown"><p>Specify that the record(s) beind update have a lifecycle stage status &lsquo;pre-release&rsquo;</p><p>The usage of this function is <strong>Required</strong> if no other status is specified</p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/status-pre-release))
</code></pre></div></div></div><div class="public anchor" id="var-status-published"><h3>status-published</h3><div class="usage"><code>(status-published)</code></div><div class="doc"><div class="markdown"><p>Specify that the record(s) beind update have a lifecycle stage status &lsquo;published&rsquo;</p><p>This means that the record will be available/visible in the dataset to the users that have access to it.</p><p>The usage of this function is <strong>Required</strong> if no other status is specified</p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/status-published))
</code></pre></div></div></div><div class="public anchor" id="var-status-staging"><h3>status-staging</h3><div class="usage"><code>(status-staging)</code></div><div class="doc"><div class="markdown"><p>Specify that the record(s) beind update have a lifecycle stage status &lsquo;staging&rsquo;</p><p>The usage of this function is <strong>Required</strong> if no other status is specified</p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/status-staging))
</code></pre></div></div></div><div class="public anchor" id="var-status-unspecified"><h3>status-unspecified</h3><div class="usage"><code>(status-unspecified)</code></div><div class="doc"><div class="markdown"><p>Specify that the record(s) beind update have a lifecycle stage status &lsquo;unspecified&rsquo;</p><p>The usage of this function is <strong>Required</strong> if no other status is specified</p><h5>Usage</h5>
<pre><code>(crud/update
  (crud/status-unspecified))
</code></pre></div></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update &amp; body)</code></div><div class="doc"><div class="markdown"><p>CRUD Update query.</p><p><strong>Required</strong></p><h5>Usage</h5>
<pre><code>(use &#39;[clj-turtle.core])
(require &#39;[clj-osf.crud.create :as crud-c])

(defns foo &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;)
(defns iron &quot;http://purl.org/ontology/iron#&quot;)

(turtle/defns iron &quot;http://purl.org/ontology/iron#&quot;
(turtle/defns foo &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;)
(turtle/defns foaf &quot;http://xmlns.com/foaf/0.1/&quot;)

(crud/update
  (crud/dataset &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;)
  (crud/document
    (turtle/rdf
      (foo :bob) (turtle/a) (foaf :Person)
      (foo :bob) (iron :prefLabel) (turtle/literal &quot;Bob&quot; :lang :en)
      (foo :bob) (iron :prefLabel) (turtle/literal &quot;Robert&quot; :lang :fr)
      (foo :bob) (foaf :knows) (foo :alice) (turtle/rei 
                                              (foo :since) (turtle/literal &quot;2014-10-25&quot;
                                                            :type :xsd:dateTime))
      (foo :bob) (foaf :knows) (foo :eli) (turtle/rei 
                                            (foo :since) (turtle/literal &quot;2014-11-20&quot;
                                                          :type :xsd:dateTime))))

  (crud/is-rdf-n3)
  (crud/status-published))  
</code></pre></div></div></div></div></body></html>