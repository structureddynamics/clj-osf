<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-osf.revision.update documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-osf 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-osf</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.auth.lister.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lister</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registrar</span></div></div></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.access.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>access</span></div></a></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.group.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>group</span></div></a></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li><li class="depth-4"><a href="clj-osf.auth.registrar.ws.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ws</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>cognonto</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.cognonto.classify.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>classify</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tag</span></div></div></li><li class="depth-4"><a href="clj-osf.cognonto.tag.concepts.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>concepts</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.core.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crud</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.crud.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.crud.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.crud.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.crud.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>dataset</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.dataset.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.dataset.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.dataset.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.dataset.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>ontology</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.ontology.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.ontology.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.ontology.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.ontology.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>revision</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.revision.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.diff.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>diff</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.lister.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lister</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3 current"><a href="clj-osf.revision.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.search.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>search</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.sparql.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sparql</span></div></a></li><li class="depth-2"><a href="clj-osf.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-osf.revision.update.html#var-dataset"><div class="inner"><span>dataset</span></div></a></li><li class="depth-1"><a href="clj-osf.revision.update.html#var-is-archive"><div class="inner"><span>is-archive</span></div></a></li><li class="depth-1"><a href="clj-osf.revision.update.html#var-is-experimental"><div class="inner"><span>is-experimental</span></div></a></li><li class="depth-1"><a href="clj-osf.revision.update.html#var-is-harvesting"><div class="inner"><span>is-harvesting</span></div></a></li><li class="depth-1"><a href="clj-osf.revision.update.html#var-is-pre-release"><div class="inner"><span>is-pre-release</span></div></a></li><li class="depth-1"><a href="clj-osf.revision.update.html#var-is-published"><div class="inner"><span>is-published</span></div></a></li><li class="depth-1"><a href="clj-osf.revision.update.html#var-is-staging"><div class="inner"><span>is-staging</span></div></a></li><li class="depth-1"><a href="clj-osf.revision.update.html#var-is-unspecified"><div class="inner"><span>is-unspecified</span></div></a></li><li class="depth-1"><a href="clj-osf.revision.update.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="clj-osf.revision.update.html#var-uri"><div class="inner"><span>uri</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clj-osf.revision.update</h2><div class="doc"><div class="markdown"><p>Send a Revision Update Query to a OSF Revision Update web service endpoint</p><p>The Revision: Update web service endpoint is used to change the lifestage status of a revision record. If you change the lifecycle stage of a unpublished revision to published, then this will replace the currently published record by this newly published revision. If you change the status of a currently published record to something else than published, then it will unpublish the record, and this record won&rsquo;t be accessible anymore in the &lsquo;public&rsquo; dataset. This record will always be available via its revisions, however if the CRUD: Read web service endpoint is used with its URI, then it will return an error saying the record is not existing in the dataset. However, you could re-publish this record anytime in the future using this Revision: Update web service endpoint.</p><p>To use the Revision: Update code, you have to:</p>
<pre><code>;; Use/require the namespace
(require &#39;[clj-osf.revision.update :as revision-u])

;; Define the OSF Sandbox credentials (or your own):
(require &#39;[clj-osf.core :as osf])

(osf/defosf osf-test-endpoint {:protocol :http
                               :domain &quot;sandbox.opensemanticframework.org&quot;
                               :api-key &quot;EDC33DA4D977CFDF7B90545565E07324&quot;
                               :app-id &quot;administer&quot;})

(osf/defuser osf-test-user {:uri &quot;http://sandbox.opensemanticframework.org/wsf/users/admin&quot;})
</code></pre><p><a href="http://wiki.opensemanticframework.org/index.php/Revision:_Update#Web_Service_Endpoint_Information">Open Semantic Framework Endpoint Documentation</a></p></div></div><div class="public anchor" id="var-dataset"><h3>dataset</h3><div class="usage"><code>(dataset uri)</code></div><div class="doc"><div class="markdown"><p>Specifies the dataset URI where the record is indexed.</p><p>The usage of this function is <strong>Required</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uri]</code> The dataset URI where the record is indexed. This is the URI of the dataset, and not  the URI of the revisions dataset</li>
</ul><h5>Usage</h5>
<pre><code>(revision/update
  (revision/dataset &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;))
</code></pre></div></div></div><div class="public anchor" id="var-is-archive"><h3>is-archive</h3><div class="usage"><code>(is-archive)</code></div><div class="doc"><div class="markdown"><p>Specify that the record being updated has a lifecycle stage status &lsquo;archive&rsquo;</p><p>The usage of this function, or one of the <code>is-XYZ</code> function, is <strong>Required</strong></p><h5>Usage</h5>
<pre><code>(revision/update
  (revision/is-archive))
</code></pre></div></div></div><div class="public anchor" id="var-is-experimental"><h3>is-experimental</h3><div class="usage"><code>(is-experimental)</code></div><div class="doc"><div class="markdown"><p>Specify that the record being updated has a lifecycle stage status &lsquo;experimental&rsquo;</p><p>The usage of this function, or one of the <code>is-XYZ</code> function, is <strong>Required</strong></p><h5>Usage</h5>
<pre><code>(revision/update
  (revision/is-experimental))
</code></pre></div></div></div><div class="public anchor" id="var-is-harvesting"><h3>is-harvesting</h3><div class="usage"><code>(is-harvesting)</code></div><div class="doc"><div class="markdown"><p>Specify that the record being updated has a lifecycle stage status &lsquo;experimental&rsquo;</p><p>The usage of this function, or one of the <code>is-XYZ</code> function, is <strong>Required</strong></p><h5>Usage</h5>
<pre><code>(revision/update
  (revision/is-experimental))
</code></pre></div></div></div><div class="public anchor" id="var-is-pre-release"><h3>is-pre-release</h3><div class="usage"><code>(is-pre-release)</code></div><div class="doc"><div class="markdown"><p>Specify that the record being updated has a lifecycle stage status &lsquo;pre-release&rsquo;</p><p>The usage of this function, or one of the <code>is-XYZ</code> function, is <strong>Required</strong></p><h5>Usage</h5>
<pre><code>(revision/update
  (revision/is-pre-release))
</code></pre></div></div></div><div class="public anchor" id="var-is-published"><h3>is-published</h3><div class="usage"><code>(is-published)</code></div><div class="doc"><div class="markdown"><p>Specify that the record being updated has a lifecycle stage status &lsquo;published&rsquo;</p><p>The usage of this function, or one of the <code>is-XYZ</code> function, is <strong>Required</strong></p><h5>Usage</h5>
<pre><code>(revision/update
  (revision/is-published))
</code></pre></div></div></div><div class="public anchor" id="var-is-staging"><h3>is-staging</h3><div class="usage"><code>(is-staging)</code></div><div class="doc"><div class="markdown"><p>Specify that the record being updated has a lifecycle stage status &lsquo;staging&rsquo;</p><p>The usage of this function, or one of the <code>is-XYZ</code> function, is <strong>Required</strong></p><h5>Usage</h5>
<pre><code>(revision/update
  (revision/is-staging))
</code></pre></div></div></div><div class="public anchor" id="var-is-unspecified"><h3>is-unspecified</h3><div class="usage"><code>(is-unspecified)</code></div><div class="doc"><div class="markdown"><p>Specify that the record being updated has a lifecycle stage status &lsquo;unspecified&rsquo;</p><p>The usage of this function, or one of the <code>is-XYZ</code> function, is <strong>Required</strong></p><h5>Usage</h5>
<pre><code>(revision/update
  (revision/is-unspecified))
</code></pre></div></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update &amp; body)</code></div><div class="doc"><div class="markdown"><p>Revision: Update query.</p><p><strong>Required</strong></p><h5>Usage</h5>
<pre><code>;; Update the status of the `test:bob` record to &quot;archive&quot;
(revision-u/update
  (revision-u/dataset &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;)
  (revision-u/uri &quot;http://sandbox.opensemanticframework.org/datasets/test/bob&quot;)
  (revision-u/is-archive))
</code></pre></div></div></div><div class="public anchor" id="var-uri"><h3>uri</h3><div class="usage"><code>(uri uri)</code></div><div class="doc"><div class="markdown"><p>Specifies the URI of the record for which you want the list of revisions.</p><p><em>Note:</em> this URI can be found using the <code>(clj-osf.revision.lister/lister)</code> function</p><p>The usage of this function is <strong>Required</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uri]</code> URI of the record for which you want its list of revisions</li>
</ul><h5>Usage</h5>
<pre><code>(revision/update
  (revision/uri &quot;http://sandbox.opensemanticframework.org/datasets/test/bob&quot;))
</code></pre></div></div></div></div></body></html>