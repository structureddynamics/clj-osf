<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-osf.search documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-osf 0.1.2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-osf</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.auth.lister.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lister</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registrar</span></div></div></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.access.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>access</span></div></a></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.group.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>group</span></div></a></li><li class="depth-4 branch"><a href="clj-osf.auth.registrar.user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li><li class="depth-4"><a href="clj-osf.auth.registrar.ws.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ws</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>cognonto</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.cognonto.classify.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>classify</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tag</span></div></div></li><li class="depth-4"><a href="clj-osf.cognonto.tag.concepts.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>concepts</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.core.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crud</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.crud.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.crud.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.crud.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.crud.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>dataset</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.dataset.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.dataset.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.dataset.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.dataset.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>ontology</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.ontology.create.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.ontology.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.ontology.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.ontology.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>revision</span></div></div></li><li class="depth-3 branch"><a href="clj-osf.revision.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.diff.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>diff</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.lister.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lister</span></div></a></li><li class="depth-3 branch"><a href="clj-osf.revision.read.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read</span></div></a></li><li class="depth-3"><a href="clj-osf.revision.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-2 branch current"><a href="clj-osf.search.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>search</span></div></a></li><li class="depth-2 branch"><a href="clj-osf.sparql.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sparql</span></div></a></li><li class="depth-2"><a href="clj-osf.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-osf.search.html#var-.2Band"><div class="inner"><span>+and</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-.2Battribute"><div class="inner"><span>+attribute</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-.2Bdataset"><div class="inner"><span>+dataset</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-.2Bnot"><div class="inner"><span>+not</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-.2Bor"><div class="inner"><span>+or</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-.2Btype"><div class="inner"><span>+type</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-aggregate-attribute-object-type-literal"><div class="inner"><span>aggregate-attribute-object-type-literal</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-aggregate-attribute-object-type-uri"><div class="inner"><span>aggregate-attribute-object-type-uri</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-aggregate-attribute-object-type-uri-literal"><div class="inner"><span>aggregate-attribute-object-type-uri-literal</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-aggregate-attributes"><div class="inner"><span>aggregate-attributes</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-attributes-boolean-operation-and"><div class="inner"><span>attributes-boolean-operation-and</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-attributes-boolean-operation-or"><div class="inner"><span>attributes-boolean-operation-or</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-attributes-phrase-boost"><div class="inner"><span>attributes-phrase-boost</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-attributes-values-boost"><div class="inner"><span>attributes-values-boost</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-attributes-values-filters"><div class="inner"><span>attributes-values-filters</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-build-extended-filters"><div class="inner"><span>build-extended-filters</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-dataset-filters"><div class="inner"><span>dataset-filters</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-default-operator-and"><div class="inner"><span>default-operator-and</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-default-operator-or"><div class="inner"><span>default-operator-or</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-disable-inference"><div class="inner"><span>disable-inference</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-distance-filter"><div class="inner"><span>distance-filter</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-enable-inference"><div class="inner"><span>enable-inference</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-exclude-aggregates"><div class="inner"><span>exclude-aggregates</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-exclude-score"><div class="inner"><span>exclude-score</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-exclude-spellcheck"><div class="inner"><span>exclude-spellcheck</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-extended-filters"><div class="inner"><span>extended-filters</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-grouping"><div class="inner"><span>grouping</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-include-aggregates"><div class="inner"><span>include-aggregates</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-include-attributes"><div class="inner"><span>include-attributes</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-include-no-attributes"><div class="inner"><span>include-no-attributes</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-include-score"><div class="inner"><span>include-score</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-include-spellcheck"><div class="inner"><span>include-spellcheck</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-items"><div class="inner"><span>items</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-lang"><div class="inner"><span>lang</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-number-of-aggregate-attributes-object"><div class="inner"><span>number-of-aggregate-attributes-object</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-page"><div class="inner"><span>page</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-phrase-boost-distance"><div class="inner"><span>phrase-boost-distance</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-query"><div class="inner"><span>query</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-range-filter"><div class="inner"><span>range-filter</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-records-location-aggregator"><div class="inner"><span>records-location-aggregator</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-search"><div class="inner"><span>search</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-search-restrictions"><div class="inner"><span>search-restrictions</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-sorts"><div class="inner"><span>sorts</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-type-filters"><div class="inner"><span>type-filters</span></div></a></li><li class="depth-1"><a href="clj-osf.search.html#var-types-boost"><div class="inner"><span>types-boost</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clj-osf.search</h2><div class="doc"><div class="markdown"><p>Send a The Search Web service is used to perform full text searches on the structured data indexed on a OSF instance. A search query can be as simple as querying the data store for a single keyword, or to query it using a series of complex filters. Each search query can be applied to all, or a subset of, datasets accessible by the requester. All of the full text queries comply with the Lucene querying syntax.</p><p>Each Search query can be filtered by these different filtering criteria:  + Type of the record(s) being requested  + Dataset where the record(s) got indexed  + Presence of an attribute describing the record(s)  + A specific value, for a specific attribute describing the record(s)  + A distance from a lat/long coordinate (for geo-enabled OSF instance)  + A range of lat/long coordinates (for geo-enabled OSF instance)</p><p>To use the Search code, you have to:</p>
<pre><code>;; Use/require the namespace
(require &#39;[clj-osf.search :as search])

;; Define the OSF Sandbox credentials (or your own):
(require &#39;[clj-osf.core :as osf])

(osf/defosf osf-test-endpoint {:protocol :http
                               :domain &quot;sandbox.opensemanticframework.org&quot;
                               :api-key &quot;EDC33DA4D977CFDF7B90545565E07324&quot;
                               :app-id &quot;administer&quot;})

(osf/defuser osf-test-user {:uri &quot;http://sandbox.opensemanticframework.org/wsf/users/admin&quot;})
</code></pre><p><a href="http://wiki.opensemanticframework.org/index.php/Search#Web_Service_Endpoint_Information">Open Semantic Framework Endpoint Documentation</a></p></div></div><div class="public anchor" id="var-.2Band"><h3>+and</h3><div class="usage"><code>(+and)</code></div><div class="doc"><div class="markdown"><p>Add a AND operator to the extended filters query</p><h5>Usage</h5>
<pre><code>(search/build-extended-filters
  &quot;test&quot; (search/+and) &quot;bob&quot;)
</code></pre></div></div></div><div class="public anchor" id="var-.2Battribute"><h3>+attribute</h3><div class="usage"><code>(+attribute uri &amp; {:keys [value value-is-uri], :or {value &quot;*&quot;, value-is-uri false}})</code></div><div class="doc"><div class="markdown"><p>Add an attribute/value filter</p><h5>Parameters</h5>
<ul>
  <li><code>[uri]</code> Type URI to add to the extended filters query.</li>
  <li><code>[value]</code> <em>(optional)</em> Value to filter by. By default, all values are used (&quot;*&quot;)</li>
  <li><code>[value-is-uri]</code> <em>(optional)</em> Specify if the value (or set of values) for this attribute have to be considered  as URIs (this should be specified to TRUE if the attribute is an object property)</li>
</ul><h5>Usage</h5>
<pre><code>(search/build-extended-filters
  (search/+attribute &quot;http://purl.org/ontology/iron#prefLabel&quot; :value &quot;bob&quot;))
</code></pre></div></div></div><div class="public anchor" id="var-.2Bdataset"><h3>+dataset</h3><div class="usage"><code>(+dataset uri)</code></div><div class="doc"><div class="markdown"><p>Add a dataset URI to filter</p><h5>Parameters</h5>
<ul>
  <li><code>[uri]</code> Dataset URI to add to the extended filters query.</li>
</ul><h5>Usage</h5>
<pre><code>(search/build-extended-filters
  (search/+dataset &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;)
  (search/+and)
  &quot;bob&quot;)
</code></pre></div></div></div><div class="public anchor" id="var-.2Bnot"><h3>+not</h3><div class="usage"><code>(+not)</code></div><div class="doc"><div class="markdown"><p>Add a NOT operator to the extended filters query</p><h5>Usage</h5>
<pre><code>(search/build-extended-filters
  (search/+not) &quot;bob&quot;)
</code></pre></div></div></div><div class="public anchor" id="var-.2Bor"><h3>+or</h3><div class="usage"><code>(+or)</code></div><div class="doc"><div class="markdown"><p>Add a OR operator to the extended filters query</p><h5>Usage</h5>
<pre><code>(search/build-extended-filters
  &quot;test&quot; (search/+or) &quot;bob&quot;)
</code></pre></div></div></div><div class="public anchor" id="var-.2Btype"><h3>+type</h3><div class="usage"><code>(+type uri &amp; {:keys [enable-inference], :or {enable-inference false}})</code></div><div class="doc"><div class="markdown"><p>Add a type URI to filter</p><h5>Parameters</h5>
<ul>
  <li><code>[uri]</code> Type URI to add to the extended filters query.</li>
  <li><code>[enable-inference]</code> <em>(optional)</em> inferencing for this type filter. <code>true</code> to enable inference</li>
</ul><h5>Usage</h5>
<pre><code>(search/build-extended-filters
  (search/+dataset &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;)
  (search/+and)
  (search/+type &quot;http://xmlns.com/foaf/0.1/Person&quot;)
  (search/+and)
  &quot;bob&quot;)
</code></pre></div></div></div><div class="public anchor" id="var-aggregate-attribute-object-type-literal"><h3>aggregate-attribute-object-type-literal</h3><div class="usage"><code>(aggregate-attribute-object-type-literal)</code></div><div class="doc"><div class="markdown"><p>Determines that the aggregated value returned by the endpoint is a literal. If the value is a URI (a reference to some record), then the literal value will be the preferred label of that referred record.</p><p>This is the default behavior of this service.</p><h5>Usage</h5>
<pre><code>(search/search
  (search/aggregate-attribute-object-type-literal))
</code></pre></div></div></div><div class="public anchor" id="var-aggregate-attribute-object-type-uri"><h3>aggregate-attribute-object-type-uri</h3><div class="usage"><code>(aggregate-attribute-object-type-uri)</code></div><div class="doc"><div class="markdown"><p>Determines that the aggregated value returned by the endpoint is a URI. If the value of the attribute(s) is a URI (a reference to some record) then that URI will be returned as the aggregated value. </p><h5>Usage</h5>
<pre><code>(search/search
  (search/aggregate-attribute-object-type-uri))
</code></pre></div></div></div><div class="public anchor" id="var-aggregate-attribute-object-type-uri-literal"><h3>aggregate-attribute-object-type-uri-literal</h3><div class="usage"><code>(aggregate-attribute-object-type-uri-literal)</code></div><div class="doc"><div class="markdown"><p>Determines that the aggregated value returned by the endpoint is a URI and a Literal</p><h5>Usage</h5>
<pre><code>(search/search
  (search/aggregate-attribute-object-type-uri-literal))
</code></pre></div></div></div><div class="public anchor" id="var-aggregate-attributes"><h3>aggregate-attributes</h3><div class="usage"><code>(aggregate-attributes attributes)</code></div><div class="doc"><div class="markdown"><p>Specify a vector of attributes URI for which we want their aggregated values. This is used to get a list of values, and their counts for a given attribute.</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[attributes]</code> Vector of attributes URI for which we want their aggregates</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/aggregate-attributes [&quot;http://purl.org/ontology/iron#prefLabel&quot;
                                &quot;http://xmlns.com/foaf/0.1/knows&quot;]))
</code></pre></div></div></div><div class="public anchor" id="var-attributes-boolean-operation-and"><h3>attributes-boolean-operation-and</h3><div class="usage"><code>(attributes-boolean-operation-and)</code></div><div class="doc"><div class="markdown"><p>Set the attributes boolean operator to AND. If you have multiple attribute/value filters defined for this search query, then the Search endpoint will AND all of them.</p><p>This is the default behavior of this service.</p><h5>Usage</h5>
<pre><code>(search/search
  (search/attributes-boolean-operation-and))
</code></pre></div></div></div><div class="public anchor" id="var-attributes-boolean-operation-or"><h3>attributes-boolean-operation-or</h3><div class="usage"><code>(attributes-boolean-operation-or)</code></div><div class="doc"><div class="markdown"><p>Set the attributes boolean operator to OR. If you have multiple attribute/value filters defined for this search query, then the Search endpoint will OR all of them.</p><h5>Usage</h5>
<pre><code>(search/search
  (search/attributes-boolean-operation-or))
</code></pre></div></div></div><div class="public anchor" id="var-attributes-phrase-boost"><h3>attributes-phrase-boost</h3><div class="usage"><code>(attributes-phrase-boost uris-boosts)</code></div><div class="doc"><div class="markdown"><p>Modifying the score of the results returned by the Search endpoint by boosting the results where the field has all keywords within the distance defined by phrase distance.</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris-boosts]</code> Vector of attribute-uri/boot of the form:  [{:uri &ldquo;&hellip;&rdquo;  :boost 2}]  where, <code>:uri</code> is the attribute URI to boost and  <code>:boost</code> is the score modifier weight. Score modifier  can be quite small like 0.0001, or quite big like 10000.</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/attributes-phrase-boost
    [{:uri &quot;http://purl.org/ontology/iron#prefLabel&quot;
      :boost 2}]))
</code></pre></div></div></div><div class="public anchor" id="var-attributes-values-boost"><h3>attributes-values-boost</h3><div class="usage"><code>(attributes-values-boost attr-values &amp; {:keys [is-uri], :or {is-uri false}})</code></div><div class="doc"><div class="markdown"><p>Modifying the score of the results returned by the Search endpoint by boosting the results that have that attribute/value, and boosting it by the modifier weight.</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris-boosts]</code> Vector of attribute-uri/value of the form:  [{:uri &ldquo;&hellip;&rdquo;  :values []  :boost 12}]  &hellip;]<br/> where, <code>:uri</code> is the attribute URI to filter by,  <code>:values</code> is a vector of values to filter by the given  attribute and <code>:boost</code> is the score modifier weight.  Score modifier can be quite small like 0.0001, or  quite big like 10000.</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/attributes-values-boost
    [{:uri &quot;http://purl.org/ontology/iron#prefLabel&quot;
      :values [&quot;bob&quot;]
      :boost 12}]))
</code></pre></div></div></div><div class="public anchor" id="var-attributes-values-filters"><h3>attributes-values-filters</h3><div class="usage"><code>(attributes-values-filters attr-values)</code></div><div class="doc"><div class="markdown"><p>Set all the attribute/value filters to use for this search query</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris-boosts]</code> Vector of attribute-uri/value of the form:  [{:uri &ldquo;&hellip;&rdquo;  :values []}  {:uri &ldquo;&hellip;&rdquo;}]<br/> where, <code>:uri</code> is the attribute URI to filter by and  <code>:values</code> is a vector of values to filter by the given  attribute.</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/attributes-values-filters
    [{:uri &quot;http://purl.org/ontology/iron#prefLabel&quot;
      :values [&quot;bob&quot;]}]))
</code></pre></div></div></div><div class="public anchor" id="var-build-extended-filters"><h3>build-extended-filters</h3><div class="usage"><code>(build-extended-filters &amp; body)</code></div><div class="doc"><div class="markdown"><p>Used to generate a set of extended attribute filters that should be added to a <code>(search/query)</code>. These extended attributes filters support grouping of attributes/values filters along with the boolean operators AND, OR and NOT.</p><p>Here is an example of how this DSL should be used to create an extended search filters for the <code>(search/extended-search)</code> function:</p><h5>Usage</h5>
<pre><code>(search/build-extended-filters
  (search/)
</code></pre></div></div></div><div class="public anchor" id="var-dataset-filters"><h3>dataset-filters</h3><div class="usage"><code>(dataset-filters uris)</code></div><div class="doc"><div class="markdown"><p>Set all the dataset filters to use for this search query</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris]</code> Vector of dataset URIs to use as filters</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/dataset-filters [&quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;]))
</code></pre></div></div></div><div class="public anchor" id="var-default-operator-and"><h3>default-operator-and</h3><div class="usage"><code>(default-operator-and)</code></div><div class="doc"><div class="markdown"><p>Set the default search query operator to AND</p><p>The usage of this function is <strong>Optional</strong></p><h5>Usage</h5>
<pre><code>(search/search
  (search/default-operator-and))
</code></pre></div></div></div><div class="public anchor" id="var-default-operator-or"><h3>default-operator-or</h3><div class="usage"><code>(default-operator-or constraints)</code></div><div class="doc"><div class="markdown"><p>Set the default search query operator to OR</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[constraints]</code> Minimal number of words that should be present in the returned records.  More complex behaviors can be defined, the full syntax is explained  in the <a href="http://lucene.apache.org/solr/4_1_0/solr-core/org/apache/solr/util/doc-files/min-should-match.html">Min Number Should Match Specification Format</a> document.</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/default-operator-or 2))
</code></pre></div></div></div><div class="public anchor" id="var-disable-inference"><h3>disable-inference</h3><div class="usage"><code>(disable-inference)</code></div><div class="doc"><div class="markdown"><p>Disable the inference for this query</p><p>The usage of this function is <strong>Optional</strong></p><h5>Usage</h5>
<pre><code>(search/search
  (search/disable-inference))
</code></pre></div></div></div><div class="public anchor" id="var-distance-filter"><h3>distance-filter</h3><div class="usage"><code>(distance-filter lat long distance &amp; {:keys [type], :or {type :km}})</code></div><div class="doc"><div class="markdown"><p>The distance filter is a series of parameter that are used to filter records of the dataset according to the distance they are located from a given lat;long point</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[lat]</code> Latitude of the point of origin</li>
  <li><code>[long]</code> Longitude of the point of origin</li>
  <li><code>[distance]</code> The distance from the point of origin</li>
  <li><code>[type]</code> <em>(optional)</em> One of: <code>:km</code> or <code>:mile</code></li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/distance-filter 40.3 49.2 100 :km))
</code></pre></div></div></div><div class="public anchor" id="var-enable-inference"><h3>enable-inference</h3><div class="usage"><code>(enable-inference)</code></div><div class="doc"><div class="markdown"><p>Enable the inference for this query</p><p>The usage of this function is <strong>Optional</strong></p><h5>Usage</h5>
<pre><code>(search/search
  (search/enable-inference))
</code></pre></div></div></div><div class="public anchor" id="var-exclude-aggregates"><h3>exclude-aggregates</h3><div class="usage"><code>(exclude-aggregates)</code></div><div class="doc"><div class="markdown"><p>Exclude the aggregate records in the resultset of this query</p><p>The usage of this function is <strong>Optional</strong></p><h5>Usage</h5>
<pre><code>(search/search
  (search/exclude-aggregates))
</code></pre></div></div></div><div class="public anchor" id="var-exclude-score"><h3>exclude-score</h3><div class="usage"><code>(exclude-score)</code></div><div class="doc"><div class="markdown"><p>Exclude the scores of the results into the resultset</p><h5>Usage</h5>
<pre><code>(search/search
  (search/exclude-score))
</code></pre></div></div></div><div class="public anchor" id="var-exclude-spellcheck"><h3>exclude-spellcheck</h3><div class="usage"><code>(exclude-spellcheck)</code></div><div class="doc"><div class="markdown"><p>Exclude the spellchecking suggestions to the resultset even if the resultset is empty</p><h5>Usage</h5>
<pre><code>(search/search
  (search/exclude-spellcheck))
</code></pre></div></div></div><div class="public anchor" id="var-extended-filters"><h3>extended-filters</h3><div class="usage"><code>(extended-filters filters)</code></div><div class="doc"><div class="markdown"><p>Extended filters are used to define more complex search filtered searches. </p><h5>Usage</h5>
<pre><code>(search/search
  (search/build-extended-filters
    (search/+dataset &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;)
    (search/+and)
    (search/+type &quot;http://xmlns.com/foaf/0.1/Person&quot;)
    (search/+and)
    &quot;bob&quot;))
</code></pre></div></div></div><div class="public anchor" id="var-grouping"><h3>grouping</h3><div class="usage"><code>(grouping &amp; body)</code></div><div class="doc"><div class="markdown"><p>Group a series of extended filters criterias</p><h5>Usage</h5>
<pre><code>(search/build-extended-filters
  (search/grouping
   &quot;string-a&quot;
   (search/+and)
   &quot;string-b&quot;)
  (search/+or)
  (search/grouping
   &quot;string-c&quot;
   (search/+and)
   &quot;string-d&quot;))
</code></pre></div></div></div><div class="public anchor" id="var-include-aggregates"><h3>include-aggregates</h3><div class="usage"><code>(include-aggregates)</code></div><div class="doc"><div class="markdown"><p>Include the aggregate records in the resultset of this query</p><p>The usage of this function is the <strong>default behavior</strong></p><h5>Usage</h5>
<pre><code>(search/search
  (search/include-aggregates))
</code></pre></div></div></div><div class="public anchor" id="var-include-attributes"><h3>include-attributes</h3><div class="usage"><code>(include-attributes uris)</code></div><div class="doc"><div class="markdown"><p>Set a list of attribute URIs to include in the resultset returned by the search endpoint. All the attributes used to defined the returned resultset that are not listed in this array will be ignored, and won&rsquo;t be returned by the endpoint. This is normally used when you know the properties you need for your application, and that you want to limit the bandwidth and minimize the size of the resultset.</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris]</code> Vector of attribute URIs to see in the resultset</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/include-attributes [&quot;http://purl.org/ontology/iron#prefLabel&quot;
                              &quot;http://xmlns.com/foaf/0.1/knows&quot;]))
</code></pre></div></div></div><div class="public anchor" id="var-include-no-attributes"><h3>include-no-attributes</h3><div class="usage"><code>(include-no-attributes)</code></div><div class="doc"><div class="markdown"><p>Specify that no attributes should be returned by the query. The only two attributes that will be returned by the search endpoint are the URI and the Type of each result.</p><h5>Usage</h5>
<pre><code>(search/search
  (search/include-no-attributes))
</code></pre></div></div></div><div class="public anchor" id="var-include-score"><h3>include-score</h3><div class="usage"><code>(include-score)</code></div><div class="doc"><div class="markdown"><p>Include the scores of the results into the resultset. The score will be represented by the <code>wsf:score</code> property.</p><h5>Usage</h5>
<pre><code>(search/search
  (search/include-score))
</code></pre></div></div></div><div class="public anchor" id="var-include-spellcheck"><h3>include-spellcheck</h3><div class="usage"><code>(include-spellcheck)</code></div><div class="doc"><div class="markdown"><p>Includes the spellchecking suggestions to the resultset in the case that the resultset is empty.</p><h5>Usage</h5>
<pre><code>(search/search
  (search/include-spellcheck))
</code></pre></div></div></div><div class="public anchor" id="var-items"><h3>items</h3><div class="usage"><code>(items nb)</code></div><div class="doc"><div class="markdown"><p>Set the number of items to return in a single resultset </p><p>Default value is 10</p><h5>Parameters</h5>
<ul>
  <li><code>[nb]</code> The number of items to return in a single resultset</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/items 20))
</code></pre></div></div></div><div class="public anchor" id="var-lang"><h3>lang</h3><div class="usage"><code>(lang lang)</code></div><div class="doc"><div class="markdown"><p>Set the language of the records to be returned by the search endpoint. Only the textual information of the requested language will be returned to the user. If no textual information is available for a record, for a requested language, then only non-textual information will be returned about the record.</p><p>Default is <code>:en</code></p><h5>Parameters</h5>
<ul>
  <li><code>[lang]</code> Keyword that represents the ISO 639-1 language code standard. Examples are  <code>fr</code>, <code>en</code> and <code>es</code></li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/lang :fr))
</code></pre></div></div></div><div class="public anchor" id="var-number-of-aggregate-attributes-object"><h3>number-of-aggregate-attributes-object</h3><div class="usage"><code>(number-of-aggregate-attributes-object nb)</code></div><div class="doc"><div class="markdown"><p>Determine the number of value to aggregate for each aggregated attributes for this query. If the value is -1, then it means that all possible values for the target aggregated attributes will to be returned.</p><h5>Parameters</h5>
<ul>
  <li><code>[nb]</code> Number of values to aggregate</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/number-of-aggregate-attributes-object 10))
</code></pre></div></div></div><div class="public anchor" id="var-page"><h3>page</h3><div class="usage"><code>(page nb)</code></div><div class="doc"><div class="markdown"><p>Set the offset of the resultset to return. By example, to get the item 90 to 100, this parameter should be set to 90. </p><p>Default page is 0</p><h5>Parameters</h5>
<ul>
  <li><code>[nb]</code> The offset of the resultset to return. By example, to get the item 90 to 100,  this parameter should be set to 90.</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/page 2))
</code></pre></div></div></div><div class="public anchor" id="var-phrase-boost-distance"><h3>phrase-boost-distance</h3><div class="usage"><code>(phrase-boost-distance distance)</code></div><div class="doc"><div class="markdown"><p>Define the maximum distance between the keywords of the search query that is used by the <code>(attribute-phrase-boost)</code>.</p><h5>Parameters</h5>
<ul>
  <li><code>[distance]</code> Maximum distance betweeen the search terms</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/phrase-boost-distance 4))
</code></pre></div></div></div><div class="public anchor" id="var-query"><h3>query</h3><div class="usage"><code>(query q)</code></div><div class="doc"><div class="markdown"><p>Set the keywords to use for this search query.</p><h5>Parameters</h5>
<ul>
  <li><code>[q]</code> Keywords to use to search for this query. Keywords can use some  boolean operations. An empty string returns everything.</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/q &quot;bob&quot;))
</code></pre></div></div></div><div class="public anchor" id="var-range-filter"><h3>range-filter</h3><div class="usage"><code>(range-filter top-left-lat top-left-long bottom-right-lat bottom-right-long)</code></div><div class="doc"><div class="markdown"><p>The range filter is a series of parameter that are used to filter records of the dataset according to a rectangle bounds they are located in given their lat;long position.</p><h5>Parameters</h5>
<ul>
  <li><code>[top-left-lat]</code> Latitude of the top left corner of the bounding box</li>
  <li><code>[top-left-long]</code> Longitude of the top left corner of the bounding box</li>
  <li><code>[bottom-right-lat]</code> Latitude of the bottom right corner of the bounding box</li>
  <li><code>[bottom-right-long]</code> Longitude of the bottom right corner of the bounding box</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/range-filter &quot;40.2&quot; &quot;50.2&quot; &quot;54.4&quot; &quot;45.6&quot;))
</code></pre></div></div></div><div class="public anchor" id="var-records-location-aggregator"><h3>records-location-aggregator</h3><div class="usage"><code>(records-location-aggregator lat long)</code></div><div class="doc"><div class="markdown"><p>Specifies a lat/long location where all the results should be aggregated around. For example, if we have a set of results compromised within a region. If we don&rsquo;t want the results spread everywhere in that region, we have to specify a location for this parameter such that all results get aggregated around that specific location within the region.</p><h5>Parameters</h5>
<ul>
  <li><code>[lat]</code> Latitude of the target location</li>
  <li><code>[long]</code> Longitude of the target location</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/records-location-aggregator &quot;40.2&quot; &quot;50.2&quot;))
</code></pre></div></div></div><div class="public anchor" id="var-search"><h3>search</h3><div class="usage"><code>(search &amp; body)</code></div><div class="doc"><div class="markdown"><p>Search query.</p><p><strong>Required</strong></p><h5>Usage</h5>
<pre><code>;; Simple search query
(search/search
  (search/query &quot;bob&quot;))

;; Filter by type
(search/search
  (search/type-filters [&quot;http://xmlns.com/foaf/0.1/Person&quot;]))

;; Extended search filter
(search/search
  (search/extended-filters
    (search/build-extended-filters
      (search/+dataset &quot;http://sandbox.opensemanticframework.org/datasets/test/&quot;)
      (search/+and)
      (search/+type &quot;http://xmlns.com/foaf/0.1/Person&quot;)
      (search/+and)
      &quot;bob&quot;)))
</code></pre></div></div></div><div class="public anchor" id="var-search-restrictions"><h3>search-restrictions</h3><div class="usage"><code>(search-restrictions uris-boosts)</code></div><div class="doc"><div class="markdown"><p>Restrict a search to the records that are described using some specific attributes. Then the results are ordered by a boosting factor.</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris-boosts]</code> Vector of attribute-uri/value of the form:  [{:uri &ldquo;&hellip;&rdquo;  :boost 2}]  where, <code>:uri</code> is the attribute URI to filter by,  <code>:values</code> is a vector of values to filter by the given  attribute and <code>:boost</code> is the score modifier weight.  Score modifier can be quite small like 0.0001, or  quite big like 10000.</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/search-restrictions
    [{:uri &quot;http://purl.org/ontology/iron#prefLabel&quot;
      :boost 12}]))
</code></pre></div></div></div><div class="public anchor" id="var-sorts"><h3>sorts</h3><div class="usage"><code>(sorts uris-orders)</code></div><div class="doc"><div class="markdown"><p>Add a sort criteria to the Search query.</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris-orders]</code> Vector of attribute-uri/value of the form:  [{:uri &ldquo;&hellip;&rdquo;  :order :asc}]  where, <code>:uri</code> is the attribute URI to filter by,  <code>:order</code> is the sort for that property. Can  be <code>:desc</code> or <code>:asc</code></li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/sort
    [{:uri &quot;http://purl.org/ontology/iron#prefLabel&quot;
      :order :asc}]))
</code></pre></div></div></div><div class="public anchor" id="var-type-filters"><h3>type-filters</h3><div class="usage"><code>(type-filters uris)</code></div><div class="doc"><div class="markdown"><p>Set all the type filters to use for this search query</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris]</code> Vector of type URIs to use as filters</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/type-filters [&quot;http://xmlns.com/foaf/0.1/Person&quot;]))
</code></pre></div></div></div><div class="public anchor" id="var-types-boost"><h3>types-boost</h3><div class="usage"><code>(types-boost uris-boosts)</code></div><div class="doc"><div class="markdown"><p>Modifying the score of the results returned by the Search endpoint by boosting the results that have that type, and boosting it by the modifier weight.</p><p>The usage of this function is <strong>Optional</strong></p><h5>Parameters</h5>
<ul>
  <li><code>[uris-boosts]</code> Vector of type-uri/value of the form:  [{:uri &ldquo;&hellip;&rdquo;  :boost 2}]  where, <code>:uri</code> is the attribute URI to filter by,  <code>:boost</code> is the score modifier weight.  Score modifier can be quite small like 0.0001, or  quite big like 10000.</li>
</ul><h5>Usage</h5>
<pre><code>(search/search
  (search/sort
    [{:uri &quot;http://xmlns.com/foaf/0.1/Person&quot;
      :boost 11}]))
</code></pre></div></div></div></div></body></html>